var nau=nau||{};!function(){"use strict";var e={Controller:function(){var e,t,n,a=$(".dialog__content"),i=$(".dialog__title"),r=$(".dialog__user-input"),o=$(".dialog__choices-list"),s=$(".dialog__steps"),l=$(".dialog__control__prev"),c=$(".dialog__control__next"),u=$(".dialog__control"),d=$(".dialog__interest"),p=$(".dialog__error"),m=this,g=void 0,S=void 0,h=void 0,b=void 0,v=[],y=!1,f={interested:"",propose:"",name:"",contact:"",handOn:"",detail:"",expect:"",agency:"",budget:"",drink:"",email:"",workingPlace:""},k={nameState:{ques:"Hi, we are NAU. Come on in! <br> Take a seat and let us know what you need.",ans:{title:"My name is"}},workingState:{ques:"",ans:{title:"I'm working at"}},interestedState:{ques:"",ans:{title:"I am interested",autoFill:["in your services","in collaborating with NAU"]}},detailState:{ques:"Cool, tell us more!",ans:{title:"I need"}},expectState:{ques:"When will you expect us to deliver?",ans:{title:"I'd love to have it done within",autoFill:["2 months","6 months","a year","Other"]}},proposeState:{ques:"I would like to propose",ans:{title:"I would like to propose",autoFill:["a bussiness partnership","a co-production"]}},agencyState:{ques:"We'd really like to know... how many agencies have you contacted before us?",ans:{title:"Hmmâ€¦",autoFill:["Nope! None","About 3","Maybe 5","More than 10"]}},otherExpectState:{ques:"When will you expect us to deliver?",ans:{title:"Other"}},budgetState:{ques:"We're almost there. Let's look at your budget! <br> How much you would plan to spend?",ans:{title:"Allocated budget for this project is",autoFill:["$5,000","$10,000","Other","Unknown"]}},otherBudgetState:{ques:"We're almost there. Let's look at your budget! <br> How much you would plan to spend?",ans:{title:"Other"}},drinkState:{ques:"Sorry, so excited that we forgot the drinks. <br> How do you want your coffee to be served?",ans:{title:"I prefer",autoFill:["black","with milk and sugar","milk without sugar","tea","water"]}},emailState:{ques:"Thanks, ",ans:{title:"Cool, here is my email address"}},getPhoneNumberState:{ques:"Thanks, ",ans:{title:"and phone number"}},sentMail:{ques:"Thank you, we have received your request and will revert back in next few days."}};m.init=function(){g=k.nameState,m.controlSteps(),m.render(g)},m.clear=function(e){for(h!==e.ques&&(a.innerText=""),i.innerText="",r.value="",p.innerHTML="";o.firstChild;)o.removeChild(o.firstChild)},m.preventInput=function(){r.value.length>0&&(r.value=r.value.substr(0,0))},m.renderSteps=function(e,t){for(var n=document.querySelectorAll(".dialog__steps__item"),a=0;a<t;a++)if(!n[a]){var i=document.createElement("li");i.setAttribute("class","dialog__steps__item"),i.innerHTML=a+1,s.appendChild(i)}},m.render=function(e){m.clear(e),m.typeAnimation(e);var t=function(e){r.contains(e.target)||($$(".dialog__choices-list__item").forEach(function(){o.setAttribute("style","opacity: 0; pointer-events: none")}),document.body.removeEventListener("click",t))};e.ans&&e.ans.autoFill?(r.addEventListener("keyup",m.preventInput),e.ans.autoFill.forEach(function(e){var t=document.createElement("li");t.setAttribute("class","dialog__choices-list__item"),t.innerText=e,o.appendChild(t)}),r.addEventListener("focus",function(){p.innerHTML="",r.setAttribute("maxlength","0"),r.setAttribute("readonly","true"),o.setAttribute("style","opacity: 1; pointer-events: visible"),document.body.addEventListener("click",t)}),$$(".dialog__choices-list__item").forEach(function(e){e.addEventListener("click",function(){r.value=e.innerText,o.setAttribute("style","opacity: 0; pointer-events: none")})})):(r.removeEventListener("keyup",m.preventInput),r.addEventListener("focus",function(){p.innerHTML="",r.removeAttribute("maxlength"),r.removeAttribute("readonly"),o.setAttribute("style","opacity: 0; pointer-events: none")})),h=e.ques},m.processString=function(e){var t="<br>",n=e.indexOf(t),a=(-1!==n?e.slice(0,n)+e.slice(n+t.length):e).split("");return-1!==n&&a.splice(n,0,t),a},m.typeAnimation=function(e){var t=m.processString(e.ques);h!==e.ques?(t.forEach(function(e,t){setTimeout(function(){a.innerHTML+=e},30*t)}),e.ans&&setTimeout(function(){i.innerHTML=e.ans.title,$(".dialog__interest").setAttribute("style","opacity: 1; pointer-events: visible")},30*t.length+100)):e.ans&&setTimeout(function(){i.innerHTML=e.ans.title,$(".dialog__interest").setAttribute("style","opacity: 1; pointer-events: visible")},200),$(".dialog__interest").setAttribute("style","opacity: 0; pointer-events: none")},m.controlFlow=function(){g===k.nameState?(f.name=b,k.workingState.ques="Nice to meet you "+b,k.interestedState.ques=b+", what can we do for you?",k.emailState.ques+=b,k.getPhoneNumberState.ques+=b,g=k.workingState):g===k.workingState?(f.workingPlace=b,g=k.interestedState):g===k.interestedState&&b===k.interestedState.ans.autoFill[0]?(f.interested=b,S=k.interestedState,g=k.detailState):g===k.interestedState&&b===k.interestedState.ans.autoFill[1]?(f.interested=b,S=k.proposeState,g=k.detailState):g===k.detailState&&S===k.interestedState?(f.detail=b,g=k.expectState):g===k.detailState&&S===k.proposeState?(f.detail=b,g=k.agencyState):g===k.expectState&&"Other"!==b?(f.expect=b,g=k.agencyState):g===k.expectState&&"Other"===b?g=k.otherExpectState:g===k.otherExpectState?(f.expect=b,g=k.agencyState):g===k.agencyState&&S===k.interestedState?(f.agency=b,g=k.budgetState):g===k.agencyState&&S===k.proposeState?(f.agency=b,g=k.emailState):g===k.budgetState&&"Other"!==b?(f.budget=b,g=k.drinkState):g===k.budgetState&&"Other"===b?g=k.otherBudgetState:g===k.otherBudgetState?(f.budget=b,g=k.drinkState):g===k.drinkState?(f.drink=b,g=k.emailState):g===k.emailState?(f.email=b,g=k.getPhoneNumberState):g===k.getPhoneNumberState&&(f.contact=b,g=k.sentMail),m.render(g)},m.controlSteps=(e=0,t=3,n=0,function(){t=S&&S===k.interestedState?10:S===k.proposeState?7:3,n===t&&0!==n||m.renderSteps(e,t),n=t,g!==k.companyState&&g!==k.otherHandOnState&&g!==k.otherExpectState&&g!==k.otherBudgetState&&e<t&&Vanilla.addClass(s.children[e++],"active"),$$(".dialog__steps__item").forEach(function(t,n){t.addEventListener("click",function(){if(n!==e-1){for(;n<e-1;)Vanilla.removeClass(s.children[--e],"active");if(S===k.interestedState)switch(n){case 0:g=k.nameState;break;case 1:g=k.workingState;break;case 2:g=k.interestedState;break;case 3:g=k.detailState;break;case 4:g=k.expectState;break;case 5:g=k.agencyState;break;case 6:g=k.budgetState;break;case 7:g=k.drinkState;break;case 8:g=k.emailState}else if(S===k.proposeState)switch(n){case 0:g=k.nameState;break;case 1:g=k.workingState;break;case 2:g=k.interestedState;break;case 3:g=k.detailState;break;case 4:g=k.agencyState;break;case 5:g=k.emailState}else switch(n){case 0:g=k.nameState;break;case 1:g=k.workingState;break;case 2:g=k.interestedState}m.render(g)}})})}),m.isInputEmpty=function(){return!(b=r.value).trim().length},m.isEmail=function(e){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/g.test(e)},c.addEventListener("click",function(e){if(m.isInputEmpty())return p.innerHTML="Please fill in this field!",e.preventDefault(),!1;if(g===k.emailState&&!m.isEmail(r.value))return p.innerHTML="Not a valid e-mail address!",e.preventDefault(),!1;if(g===k.getPhoneNumberState){const t=Number.parseInt(r.value);if(!(Number.isInteger(t)||r.value.length>9&&r.value.length<12))return p.innerHTML="Not a valid phone number!",e.preventDefault(),!1;y=!0}if(y){f.contact=r.value,m.render(k.sentMail),u.setAttribute("style","display: none"),s.setAttribute("style","display: none"),d.setAttribute("style","display: none"),Vanilla.addClass(a,"dialog__content--sent-mail");var t={name:f.name.trim()||"None",workingPlace:f.workingPlace.trim()||"None",interested:f.interested||"None",detail:f.detail.trim()||"None",expect:f.expect.trim()||"None",agency:f.agency||"None",budget:f.budget.trim()||"None",drink:f.drink||"None",email:f.email||"None",contact:f.contact.trim()||"None"},n=new XMLHttpRequest;n.open("GET","https://script.google.com/macros/s/AKfycbzPg7KHTTspxaRhuTPB6_hhpXstzpqfuv_yUgD7bU7-34XEpj2P/exec?interested="+t.interested+"&propose="+t.propose+"&name="+t.name+"&workingPlace="+t.workingPlace+"&contact="+t.contact+"&detail="+t.detail+"&expect="+t.expect+"&agency="+t.agency+"&budget="+t.budget+"&drink="+t.drink+"&email="+t.email,!0),n.onload=function(){n.status>=200&&n.status<400?alert("success"):alert("error")},n.onerror=function(){},n.send()}else v.push(g),m.controlFlow(),m.controlSteps()}),l.addEventListener("click",function(){v.length&&(g=v.pop(),m.render(g))})},run:function(){(new this.Controller).init()}};nau.GetInTouchAnimation=e}();